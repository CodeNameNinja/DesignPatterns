<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Tutorial: Single Responsibility Principle</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Tutorial: Single Responsibility Principle</h1>

    <section>

<header>
    

    <h2>Single Responsibility Principle</h2>
</header>

<article>
    <p>The objective of the Single Responsibility Principle is to make sure that each class has only one reason to change.</p>
<p>take a look at the following Class.</p>
<pre class="prettyprint source lang-js"><code>import fs from &quot;fs&quot;;

class Journal {
  constructor(props) {
    this.entries = {};
  }
  addEntry(text) {
    let c = ++Journal.count;
    let entry = `${c}: ${text}`;
    this.entries[c] = entry;
    return c;
  }
  removeEntry(index) {
    delete this.entries[index];
  }
  toString() {
    return Object.values(this.entries).join(&quot;\n&quot;);
  }
  save(filename) {
    fs.writeFileSync(filename, this.toString());
  }
  static load(filename) {
    // Load File.
  }
  // Load File from URL
  static loadFromUrl(url) {
    // Load File from URL
  }
}

Journal.count = 0;

let j = new Journal();
j.addEntry(&quot;I cried today.&quot;);
j.addEntry(&quot;I ate a bug.&quot;);

console.log(j.toString());
</code></pre>
<p>As you can tell, this class has alot of different responsibilities.</p>
<p>managing a Jounal as well as handling saving a file and loading a file.</p>
<p>According to the Single Responsibility Principle, this class should only have one reason to change.</p>
<p>Let's refactor this class so that it follows the Single Responsibility Principle.</p>
<pre class="prettyprint source lang-js"><code>const fs = require('fs');

class Journal {
  constructor(props) {
    this.entries = {};
  }
  addEntry(text) {
    let c = ++Journal.count;
    let entry = `${c}: ${text}`;
    this.entries[c] = entry;
    return c;
  }
  removeEntry(index) {
    delete this.entries[index];
  }
  toString() {
    return Object.values(this.entries).join(&quot;\n&quot;);
  }
}

class PersistenceManager {
  constructor(filename) {
    this.filename = filename;
  }
  save(journal) {
    fs.writeFileSync(this.filename, journal.toString());
  }
  load() {
    return Journal.load(this.filename);
  }
}

Journal.count = 0;

let j = new Journal();
j.addEntry(&quot;I cried today.&quot;);
j.addEntry(&quot;I ate a bug.&quot;);

console.log(j.toString());

const p = new PersistenceManager(&quot;journal.txt&quot;);
p.save(j);

</code></pre>
<p>Now it's clear what each class is responsible for. and its much clearer to figure out what is going on.</p>
</article>

</section>

</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-OpenClosedPrinciple.html">Open Closed Principle</a></li><li><a href="tutorial-SingleResponsibilityPrinciple.html">Single Responsibility Principle</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Tue May 24 2022 19:17:34 GMT+0200 (South Africa Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>